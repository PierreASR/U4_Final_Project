int Ua = 0;  
int Up = 0;
int kp = 0; //ganancia proporcional 
int ki = 0; //ganancia integral
double Ea = 0; //error actual
int E = 0; /error 
int posAct = 0; //pos_value
int posRef = 0; //velocidad de referencia/posision de referencia

double PIcontroll (posAct, posRef) {
  
  E = fabs(posRef - posAct);
  Ua = Up + (Ea * kp + (ki * (1/TIME_STEP)))) - (kp * E);
  Up = Ua;
  Ea = E;
  return Ua;
  }
  